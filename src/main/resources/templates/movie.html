<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/root.html}"
      lang="en">
<head>
    <title th:text="${movie.name}">Movie Details</title>
</head>
<body>
    <section layout:fragment="content">

        <a th:href="@{/movies/{movieId}/update(movieId=${movie.id})}">Edit movie</a>

        <form th:action="@{/movies/{movieId}(movieId=${movie.id})}"
              th:method="delete"
              onsubmit="return confirm('Are you sure you want to delete this movie? It will also delete all characters for the movie.');">
            <button type="submit">Delete movie</button>
        </form>

        <h1 th:text="${movie.name}"></h1>

        <!-- TODO: imdb section with movie poster on left, movie info on right -->
        <div th:if="${movie.tmdbId != null}">
            <p th:text="${movie.tmdbId}"></p>
        </div>

        <!-- Movie test results -->
        <div th:each="question : ${movie.questions}">
            <p th:text="${question.question.displayText}"></p>
            <!-- <p th:text="${question.question.extendedDisplayText}"></p>   https://www.w3schools.com/bootstrap4/bootstrap_tooltip.asp  -->
            <p th:text="${question.answer}"></p>
            <p th:text="${question.details}"></p>
        </div>

        <!-- There are no characters -->
        <div th:if="${#lists.isEmpty(movie.movieCharacters)}">
            <p>
                We don't have any characters for this movie in our system. Does the movie have gender-queer representation?
                <a th:href="@{/movies/{movieId}/characters/create(movieId=${movie.id})}">Add a character to our database!</a>
            </p>
        </div>

        <!-- There are characters -->
        <div th:unless="${#lists.isEmpty(movie.movieCharacters)}">
            <h2>Characters</h2>
            <div th:each="character : ${movie.movieCharacters}">
                <!-- TODO: character image -->
                <p th:text="${character.character.name}"></p>
                <a th:href="@{/movies/{movieId}/characters/{movieCharacterId}(movieId=${movie.id},movieCharacterId=${character.id})}">View</a>
            </div>

            <a th:href="@{/movies/{movieId}/characters/create(movieId=${movie.id})}">Add new character</a>
        </div>
    </section>

</body>
</html>
